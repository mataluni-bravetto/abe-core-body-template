<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Guardians - Test Page</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 {
            color: #1E40AF;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .tagline {
            color: #6B7280;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .status-box {
            background: #F3F4F6;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-indicator.green {
            background: #10B981;
            box-shadow: 0 0 8px rgba(16, 185, 129, 0.5);
        }

        .status-indicator.red {
            background: #EF4444;
            box-shadow: 0 0 8px rgba(239, 68, 68, 0.5);
        }

        .content-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .content-section h2 {
            color: #1F2937;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .content-section p {
            color: #4B5563;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .test-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            background: #1E40AF;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            background: #1E3A8A;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
        }

        button.secondary {
            background: #6B7280;
        }

        button.secondary:hover {
            background: #4B5563;
        }

        .highlight-text {
            background: #FEF3C7;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #F59E0B;
        }

        .instructions {
            background: #DBEAFE;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #3B82F6;
        }

        .instructions h3 {
            color: #1E40AF;
            margin-bottom: 10px;
        }

        .instructions ol {
            margin-left: 20px;
            color: #1E3A8A;
        }

        .instructions li {
            margin: 8px 0;
        }

        pre {
            background: #1F2937;
            color: #10B981;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
        }

        .sample-texts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .sample-box {
            background: #F9FAFB;
            border: 2px solid #E5E7EB;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .sample-box:hover {
            border-color: #3B82F6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }

        .sample-box h4 {
            color: #1F2937;
            margin-bottom: 10px;
        }

        .sample-box p {
            color: #6B7280;
            font-size: 0.95em;
            line-height: 1.5;
        }

        #results {
            margin-top: 20px;
            padding: 20px;
            background: #F0FDF4;
            border: 2px solid #10B981;
            border-radius: 8px;
            display: none;
        }

        #results.error {
            background: #FEF2F2;
            border-color: #EF4444;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è AI Guardians Test Page</h1>
            <p class="tagline">Finally, AI tools for engineers who don't believe the hype</p>

            <div class="status-box">
                <strong>Backend Status:</strong>
                <span class="status-indicator" id="statusIndicator"></span>
                <span id="statusText">Checking...</span>
                <pre id="serverInfo" style="margin-top: 10px; font-size: 12px;"></pre>
            </div>
        </div>

        <div class="content-section">
            <h2>üìã How to Test</h2>
            <div class="instructions">
                <h3>Testing with Chrome Extension:</h3>
                <ol>
                    <li><strong>Load Extension:</strong> Go to <code>chrome://extensions/</code>, enable Developer mode, click "Load unpacked", select <code>AI-Guardians-chrome-ext</code> folder</li>
                    <li><strong>Configure:</strong> Click extension icon, set Gateway URL to <code>http://localhost:8000</code></li>
                    <li><strong>Test Connection:</strong> Click "Test Connection" - should show ‚úÖ Connected</li>
                    <li><strong>Select Text:</strong> Highlight any text below</li>
                    <li><strong>Analyze:</strong> Click extension icon ‚Üí "Show Me the Proof"</li>
                    <li><strong>View Results:</strong> See analysis from 5 guard services!</li>
                </ol>
            </div>
        </div>

        <div class="content-section">
            <h2>üìù Sample Texts to Analyze</h2>
            <p>Click any box to select the text, then use the AI Guardians extension to analyze it:</p>

            <div class="sample-texts">
                <div class="sample-box" onclick="selectText(this)">
                    <h4>ü§ñ AI Technology</h4>
                    <p>Artificial intelligence is revolutionizing industries from healthcare to finance. Machine learning algorithms can now detect patterns in data that humans might miss, leading to breakthroughs in disease diagnosis, fraud detection, and personalized recommendations. However, concerns about bias, transparency, and job displacement remain significant challenges that need careful consideration.</p>
                </div>

                <div class="sample-box" onclick="selectText(this)">
                    <h4>üåç Climate Change</h4>
                    <p>Climate change represents one of the most pressing challenges facing humanity. Rising global temperatures are causing more frequent extreme weather events, rising sea levels, and disruption to ecosystems worldwide. Scientists emphasize the urgent need for collective action to reduce carbon emissions and transition to renewable energy sources to mitigate the worst impacts.</p>
                </div>

                <div class="sample-box" onclick="selectText(this)">
                    <h4>üíº Remote Work</h4>
                    <p>The shift to remote work has transformed how companies operate and employees collaborate. While remote work offers flexibility and eliminates commute time, it also presents challenges around work-life balance, team cohesion, and communication. Organizations are experimenting with hybrid models to find the optimal balance between in-office and remote work arrangements.</p>
                </div>

                <div class="sample-box" onclick="selectText(this)">
                    <h4>üîí Cybersecurity</h4>
                    <p>As our lives become increasingly digital, cybersecurity has never been more critical. From protecting personal data to securing critical infrastructure, organizations must remain vigilant against evolving threats. Ransomware attacks, phishing schemes, and data breaches continue to pose significant risks, requiring robust security measures and user education.</p>
                </div>

                <div class="sample-box" onclick="selectText(this)">
                    <h4>üéì Online Education</h4>
                    <p>Digital learning platforms have democratized access to education, enabling students worldwide to learn from top universities and experts. Interactive courses, virtual labs, and AI-powered tutoring systems enhance the learning experience. However, questions remain about educational equity, engagement levels, and the value of in-person instruction versus online alternatives.</p>
                </div>

                <div class="sample-box" onclick="selectText(this)">
                    <h4>üí∞ Cryptocurrency</h4>
                    <p>Cryptocurrency and blockchain technology promise to revolutionize financial systems by enabling decentralized, transparent transactions. Bitcoin, Ethereum, and other digital currencies have gained mainstream attention, attracting both enthusiastic supporters and skeptical critics. Regulatory challenges, environmental concerns about energy consumption, and market volatility continue to fuel debate about crypto's future role in finance.</p>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2>üß™ Manual API Test</h2>
            <p>Test the backend API directly from this page:</p>

            <div class="test-buttons">
                <button onclick="testHealth()">Test Health Endpoint</button>
                <button onclick="testAnalysis()" class="secondary">Test Analysis Endpoint</button>
            </div>

            <div id="results"></div>
        </div>

        <div class="content-section">
            <h2>‚ú® What Should Happen</h2>
            <div class="highlight-text">
                <strong>When you analyze text with the extension:</strong>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li><strong>BiasGuard:</strong> Detects bias in language (political, gender, racial)</li>
                    <li><strong>TrustGuard:</strong> Evaluates credibility and reliability</li>
                    <li><strong>ContextGuard:</strong> Checks if context is clear and maintained</li>
                    <li><strong>SecurityGuard:</strong> Looks for security threats and vulnerabilities</li>
                    <li><strong>TokenGuard:</strong> Optimizes token usage for AI systems</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Results show:</strong> Overall score (0-1), confidence level, and detailed analysis from each guard service.</p>
            </div>
        </div>

        <div class="footer">
            <p>Test Server: <strong>http://localhost:8000</strong></p>
            <p>Extension Folder: <strong>c:\Users\jimmy\.cursor\AI-Guardians-chrome-ext</strong></p>
            <p style="margin-top: 10px; opacity: 0.8;">üìä Dashboard: dashboard.aiguardian.ai | üåê Website: aiguardian.ai</p>
        </div>
    </div>

    <script>
        // Check backend status on load
        async function checkBackend() {
            const indicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            const serverInfo = document.getElementById('serverInfo');

            try {
                const response = await fetch('http://localhost:8000/health/live');
                const data = await response.json();

                if (response.ok) {
                    indicator.className = 'status-indicator green';
                    statusText.textContent = 'Connected ‚úÖ';
                    serverInfo.textContent = JSON.stringify(data, null, 2);
                } else {
                    throw new Error('Server returned error');
                }
            } catch (error) {
                indicator.className = 'status-indicator red';
                statusText.textContent = 'Not Connected ‚ùå - Start test server!';
                serverInfo.textContent = 'Error: ' + error.message;
            }
        }

        // Test health endpoint
        async function testHealth() {
            const results = document.getElementById('results');
            results.style.display = 'block';
            results.className = '';
            results.innerHTML = '<strong>Testing health endpoint...</strong>';

            try {
                const response = await fetch('http://localhost:8000/health/live');
                const data = await response.json();
                results.innerHTML = `
                    <strong>‚úÖ Health Check Successful!</strong>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                results.className = 'error';
                results.innerHTML = `
                    <strong>‚ùå Health Check Failed</strong>
                    <p>Error: ${error.message}</p>
                    <p>Make sure test server is running: <code>python test-server.py</code></p>
                `;
            }
        }

        // Test analysis endpoint
        async function testAnalysis() {
            const results = document.getElementById('results');
            results.style.display = 'block';
            results.className = '';
            results.innerHTML = '<strong>Testing analysis endpoint...</strong>';

            try {
                const response = await fetch('http://localhost:8000/gateway/unified', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        analysis_id: 'browser_test_' + Date.now(),
                        text: 'This is a test message to verify the unified gateway endpoint is working.',
                        options: {
                            timestamp: new Date().toISOString()
                        }
                    })
                });

                const data = await response.json();
                results.innerHTML = `
                    <strong>‚úÖ Analysis Successful!</strong>
                    <p><strong>Overall Score:</strong> ${data.overall_score}</p>
                    <p><strong>Confidence:</strong> ${(data.confidence * 100).toFixed(0)}%</p>
                    <p><strong>Guards Processed:</strong> ${Object.keys(data.results).length}</p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                results.className = 'error';
                results.innerHTML = `
                    <strong>‚ùå Analysis Failed</strong>
                    <p>Error: ${error.message}</p>
                    <p>Make sure test server is running: <code>python test-server.py</code></p>
                `;
            }
        }

        // Select text in a box
        function selectText(element) {
            const range = document.createRange();
            range.selectNodeContents(element);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
        }

        // Check backend on load
        checkBackend();
    </script>
</body>
</html>
